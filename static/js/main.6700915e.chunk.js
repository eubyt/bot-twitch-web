(this["webpackJsonpchatbot-twitch"]=this["webpackJsonpchatbot-twitch"]||[]).push([[0],{101:function(e,t){},102:function(e,t,c){},103:function(e,t,c){},107:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(1),s=c.n(a),r=c(21),o=c.n(r),l=c(11),i=c(7),m=c(5);function d(e){return{type:"SET_STATUS_OBS_REMOTE",statusObsRemote:e}}var b=null,u=1,j=[],h={},O=function(e){var t=e;if("string"===typeof e)try{t=JSON.parse(e)}catch(c){return void console.log("Invalid JSON")}if(t.id)return new Promise((function(e,c){h[t.id]={body:t,resolve:e,reject:c,completed:!1},b.send(JSON.stringify(t))}));console.log("id is required")},f=function(e,t){for(var c=u++,n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];var r={jsonrpc:"2.0",id:c,method:t,params:{resource:e,args:a}};return O(r)},v=function(e,t){t(d("connected")),e(),f("ScenesService","getScenes").then((function(e){e.forEach((function(e){return function(e){return j.push(Object(m.a)({},e))}(e)}))}))};function p(e,t,n,a,s){var r=c(56);s(d("pending")),(b=new r(e)).onopen=function(){f("TcpServerService","auth",t).then((function(){v(n,s)})).catch((function(e){s(d("disconnected")),a(e.message)}))},b.onmessage=function(e){return function(e){var t=JSON.parse(e);console.log(t);var c=h[t.id];c&&(t.error?c.reject(t.error):c.resolve(t.result),delete h[t.id])}(e.data)},b.onclose=function(e){s(d("disconnected")),a(e.reason)}}function x(e){return{type:"SET_STATUS_TWITCH",statusTwitch:e}}var g=null;function S(e,t,n,a,s,r){var o=c(86);(g=new o.Client({options:{debug:!0,messagesLogLevel:"info"},connection:{reconnect:!0,secure:!0},identity:{username:e,password:t},channels:n})).on("connected",(function(e,t){r(x("connected"))})),g.on("disconnected",(function(e){r(x("disconnected"))})),g.on("chat",(function(e,t,c,n){var a=JSON.parse(localStorage.getItem("command-obsRemote")),s=c.slice(1).split(" "),r="!".concat(s.shift().toLowerCase()),o=c.replace(r,"").trim();if(r===a.command){var l=null;(function(e){var t=j.filter((function(t){return t.name===e}))[0];null!=t&&f("ScenesService","makeSceneActive",t.id)})(l=s.length<1?a.defaultScene:o),g.say(e,a.response.replace("$name",l))}})),g.connect()}var N=c(10);function w(){var e=Object(a.useState)(JSON.parse(localStorage.getItem("twitch-data"))||{username:"",oauth:""}),t=Object(l.a)(e,2),c=t[0],s=t[1],r=Object(i.c)((function(e){return e.project})),o=Object(i.b)(),d=function(e){return s((function(t){return Object(m.a)(Object(m.a)({},t),{},Object(N.a)({},e.target.name,e.target.value))}))};return Object(n.jsxs)("div",{className:"card mb-4 shadow-sm",children:[Object(n.jsx)("div",{className:"card-header",children:Object(n.jsx)("h4",{className:"my-0 fw-normal",children:"Twitch"})}),Object(n.jsx)("div",{className:"card-body",children:Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),localStorage.setItem("twitch-data",JSON.stringify(c)),"disconnected"===r.statusTwitch?S(c.username,c.oauth,[c.username],0,0,o):g.disconnect()},children:[Object(n.jsx)("div",{className:"mb-3",children:Object(n.jsx)("input",{type:"text",name:"username",className:"form-control",placeholder:"Username",value:c.username,onChange:d})}),Object(n.jsx)("div",{className:"mb-3",children:Object(n.jsx)("input",{type:"text",name:"oauth",className:"form-control",placeholder:"OAuth",value:c.oauth,onChange:d})}),Object(n.jsx)("ul",{className:"list-unstyled mt-3 mb-4",children:Object(n.jsx)("li",{children:r.statusTwitch})}),"disconnected"===r.statusTwitch&&Object(n.jsx)("button",{type:"submit",className:"w-100 btn btn-lg btn-primary",children:"Salvar"}),"disconnected"!==r.statusTwitch&&Object(n.jsx)("button",{type:"submit",className:"w-100 btn btn-lg btn-primary",children:"Desconectar"})]})})]})}function y(){var e=Object(a.useState)(JSON.parse(localStorage.getItem("obs-data"))||{url:"http://127.0.0.1:59650/api",token:""}),t=Object(l.a)(e,2),c=t[0],s=t[1],r=Object(i.c)((function(e){return e.project})),o=Object(i.b)(),d=function(e){return s((function(t){return Object(m.a)(Object(m.a)({},t),{},Object(N.a)({},e.target.name,e.target.value))}))};return Object(n.jsxs)("div",{className:"card mb-4 shadow-sm",children:[Object(n.jsx)("div",{className:"card-header",children:Object(n.jsx)("h4",{className:"my-0 fw-normal",children:"Streamlabs OBS Remote"})}),Object(n.jsx)("div",{className:"card-body",children:Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),localStorage.setItem("obs-data",JSON.stringify(c)),"disconnected"===r.statusObsRemote?p(c.url,c.token,(function(){}),(function(e){console.log("Error:",e)}),o):b.close()},children:[Object(n.jsx)("div",{className:"mb-3",children:Object(n.jsx)("input",{type:"text",name:"url",className:"form-control",placeholder:"URL",value:c.url,onChange:d})}),Object(n.jsx)("div",{className:"mb-3",children:Object(n.jsx)("input",{type:"text",name:"token",className:"form-control",placeholder:"Token",value:c.token,onChange:d})}),Object(n.jsx)("ul",{className:"list-unstyled mt-3 mb-4",children:Object(n.jsx)("li",{children:r.statusObsRemote})}),"disconnected"===r.statusObsRemote&&Object(n.jsx)("button",{type:"submit",className:"w-100 btn btn-lg btn-primary",children:"Salvar"}),"disconnected"!==r.statusObsRemote&&Object(n.jsx)("button",{type:"submit",className:"w-100 btn btn-lg btn-primary",children:"Desconectar"})]})})]})}var T=function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom",children:Object(n.jsx)("h1",{className:"h2",children:"Dashboard"})}),Object(n.jsxs)("div",{className:"row row-cols-1 row-cols-md-3 mb-3 text-center",children:[Object(n.jsx)("div",{className:"col",children:Object(n.jsx)(w,{})}),Object(n.jsx)("div",{className:"col",children:Object(n.jsx)(y,{})})]})]})};var k=function(){var e=Object(a.useState)(JSON.parse(localStorage.getItem("command-obsRemote"))),t=Object(l.a)(e,2),c=t[0],s=t[1],r=function(e){return s((function(t){return Object(m.a)(Object(m.a)({},t),{},Object(N.a)({},e.target.name,e.target.value))}))};return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom",children:Object(n.jsx)("h1",{className:"h2",children:"Command"})}),Object(n.jsx)("div",{className:"row row-cols-1 row-cols-md-3 mb-3 text-center",children:Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),localStorage.setItem("command-obsRemote",JSON.stringify(c))},children:[Object(n.jsx)("div",{className:"mb-3",children:Object(n.jsx)("input",{type:"text",name:"command",className:"form-control",placeholder:"Comando Nome",value:c.command,onChange:r})}),Object(n.jsx)("div",{className:"mb-3",children:Object(n.jsx)("input",{type:"text",name:"defaultScene",className:"form-control",placeholder:"Default Scene",value:c.defaultScene,onChange:r})}),Object(n.jsx)("div",{className:"mb-3",children:Object(n.jsx)("input",{type:"text",name:"response",className:"form-control",placeholder:"Response",value:c.response,onChange:r})}),Object(n.jsx)("button",{type:"submit",className:"w-100 btn btn-lg btn-primary",children:"Salvar"})]})})]})};var C=function(){var e=Object(a.useState)("Home"),t=Object(l.a)(e,2),c=t[0],s=t[1],r=(Object(i.c)((function(e){return e.project})),Object(i.b)());return Object(a.useEffect)((function(){if(localStorage.getItem("obs-data")){var e=JSON.parse(localStorage.getItem("obs-data"));p(e.url,e.token,(function(){}),(function(){}),r)}if(localStorage.getItem("twitch-data")){var t=JSON.parse(localStorage.getItem("twitch-data"));S(t.username,t.oauth,[t.username],0,0,r)}localStorage.getItem("command-obsRemote")||localStorage.setItem("command-obsRemote",JSON.stringify({command:"!setscene",defaultScene:"Game",response:"Scene changed to: $name"}))}),[]),Object(n.jsxs)("div",{children:[Object(n.jsx)("nav",{className:"navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0",children:Object(n.jsx)("div",{className:"navbar-brand col-sm-3 col-md-2 mr-0 fs-4",children:"Twitch Bot"})}),Object(n.jsx)("div",{className:"container-fluid",children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("nav",{className:"col-md-2 d-none d-md-block bg-light sidebar",children:Object(n.jsx)("div",{className:"sidebar-sticky",children:Object(n.jsxs)("ul",{className:"nav flex-column",children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)("a",{className:"nav-link",href:"/#",onClick:function(){return s("Home")},children:[Object(n.jsx)("span",{"data-feather":"home"}),"Home"]})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)("a",{className:"nav-link",href:"/#",onClick:function(){return s("Comando")},children:[Object(n.jsx)("span",{"data-feather":"terminal"}),"Comando"]})})]})})}),Object(n.jsxs)("main",{role:"main",className:"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4",children:["Home"==c&&Object(n.jsx)(T,{}),"Comando"==c&&Object(n.jsx)(k,{})]})]})})]})},R=(c(106),c(102),c(103),c(104),c(14)),I={statusObsRemote:"disconnected",statusTwitch:"disconnected"};var J=Object(R.b)({project:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_STATUS_OBS_REMOTE":return Object(m.a)(Object(m.a)({},e),{},{statusObsRemote:t.statusObsRemote});case"SET_STATUS_TWITCH":return Object(m.a)(Object(m.a)({},e),{},{statusTwitch:t.statusTwitch});default:return e}}}),E=Object(R.c)(J),_=c(105);o.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(i.a,{store:E,children:Object(n.jsx)(C,{})})}),document.getElementById("root")),_.replace()},89:function(e,t){}},[[107,1,2]]]);
//# sourceMappingURL=main.6700915e.chunk.js.map